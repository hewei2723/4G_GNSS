# 4G智能定位开放平台

基于 **ESP32** 和 **DX-CT511N 4G模块**开发的低成本电动车定位解决方案


🚀 已实现远程定位追踪 | 📡 MQTT通信 | 🌍 坐标转换 | 💻 上位机控制

硬件PCB设计已开源到立创开源社区 [48V电动车定位器 - 立创开源硬件平台](https://oshwhub.com/hewei2723/4ggnss)

## 项目概述

通过电动车48V电瓶直接供电，利用4G模块实现全天候位置上报。核心功能包括：

- 实时GPS坐标采集（WGS-84标准）
- WGS-84/BD-09坐标系转换
- MQTT双向通信（指令控制+数据上报）
- AT指令控制
- JSON数据格式化

## 📦 硬件组成


| 组件     | 型号      | 功能               |
| -------- | --------- | ------------------ |
| 主控     | ESP32     | 数据处理与协议转换 |
| 4G模块   | DX-CT511N | 蜂窝网络通信       |
| GNSS模块 | 内置      | 卫星定位           |
| 电源模块 | 定制      | 48V→5V DC-DC转换  |

## ✅ 已完成功能

- [X]  48V电瓶供电系统
- [X]  WGS-84坐标BD09转换
- [X]  MQTT基础通信框架
- [X]  AT指令透传通道
- [X]  7×24小时稳定性测试
- [X]  JSON数据格式化

## 📂 项目文件结构

- **PC** Windows作为上位机的测试代码，具有基础功能
- **esp32** 最初的采用MCU作为上位机的版本，具有AT指令控制功能
- esp12f 是硬件搭配的mcu
- **Server** 项目服务端，采用Node js构建
- WebUI 前端控制台页面

## 📌 Todo List

### 硬件端

- [X]  低功耗模式开发
- [ ]  运动检测唤醒功能
- [X]  电源浪涌保护电路
- [ ]  防水外壳设计
- [ ]  OTA更新支持

### 服务端

- [X]  后端使用NodeJs开发
- [X]  Web控制台开发
- [X]  用户鉴权
- [X]  历史轨迹存储
- [ ]  地理围栏功能

### 移动端

- [ ]  微信小程序基础框架
- [ ]  实时地图显示
- [ ]  远程指令控制
- [ ]  报警推送功能

## 🌟 项目里程碑

- **3/15**：建立MQTT通信基础框架，完成坐标转换算法
- **3/16**：通过HomeAssistant验证数据流稳定性
- **3/16**：实现AT指令透传控制，引入JSON格式化
- 3/18：经过了两天的挣扎，完成了后端开发，并且重写了定位服务，采用 NMEA协议,定位精度很高，唯一的问题是NMEA回显速度太快，目前同步速度过快会导致流量费用极高，经测试20000毫安充电宝供电，九个小时耗电量9%
- 3/28：完成了硬件设计，将esp32换成了esp12f，esp12f的SRAM只有50kb，一段时间后会溢出重启，目前不知道是什么原因，因为不影响我自己使用所以就没有研究这个bug
- 4/10：项目目前不再进行更新了
